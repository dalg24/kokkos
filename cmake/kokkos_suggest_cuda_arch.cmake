KOKKOS_CFG_DEPENDS(SUGGESTED_CUDA_ARCH COMPILER_ID)

FIND_PACKAGE(CUDA)
IF (CUDA_FOUND)
  SET(POSSIBLE_CUDA_NAMES)
  message("VERSION IS ${CUDA_VERSION}")
  IF (CUDA_VERSION VERSION_GREATER_EQUAL 10)
    LIST(APPEND POSSIBLE_CUDA_NAMES TURING75)
  ENDIF()
  IF (CUDA_VERSION VERSION_GREATER_EQUAL 9)
    LIST(APPEND POSSIBLE_CUDA_NAMES VOLTA70;VOLTA72)
  ENDIF()
  IF (CUDA_VERSION VERSION_GREATER_EQUAL 8)
    LIST(APPEND POSSIBLE_CUDA_NAMES PASCAL60;PASCAL61;PASCAL62)
  ENDIF()
  IF (CUDA_VERSION VERSION_GREATER_EQUAL 7)
    LIST(APPEND POSSIBLE_CUDA_NAMES MAXWELL52)
  ENDIF()
  #make these always available
  LIST(APPEND POSSIBLE_CUDA_NAMES MAXWELL50;KEPLER30;KEPLER32;KEPLER35;KEPLER37)
  
  MESSAGE(STATUS "Based on your CUDA version, the following architecture options may be supported:")
  FOREACH(ARCH ${POSSIBLE_CUDA_NAMES})
    MESSAGE(STATUS "-DKokkos_ARCH_${ARCH}=ON")
  ENDFOREACH()
  MESSAGE(STATUS "To validate your build, you can run on the CUDA-enabled node 'make cuda_version'")
ELSE()
  MESSAGE(SEND_ERROR "No valid CUDA installation found. I can't make any architecure recommendations")
ENDIF()

